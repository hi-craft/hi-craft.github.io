---
layout: post
title: 'ECMAScript6'
date: 2018-9-14
subtitle: 'ES6åŸºç¡€'
categories: ç¬”è®°
cover: 'https://farm5.staticflickr.com/4805/44117243400_c3beab9d50_o.png'
tags: ECMAScript6
---
# ES6 åŸºç¡€

**ES6ä½œç”¨äºä¸¥æ ¼æ¨¡å¼ä¸‹,ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶**

- å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨
- å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§
- ä¸èƒ½ä½¿ç”¨withè¯­å¥
- ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼
- ä¸èƒ½ä½¿ç”¨å‰ç¼€0è¡¨ç¤ºå…«è¿›åˆ¶æ•°
- ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§
- ä¸èƒ½åˆ é™¤å˜é‡delete propï¼Œåªèƒ½åˆ é™¤å±æ€§delete global[prop]
- evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡
- evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼
- argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–
- ä¸èƒ½ä½¿ç”¨arguments.callee
- ä¸èƒ½ä½¿ç”¨arguments.caller
- ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡
- ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ
- å¢åŠ äº†ä¿ç•™å­—(æ¯”å¦‚protectedã€staticã€interface)

[TOC]



**let **

ç±»ä¼¼äºvar

å£°æ˜å˜é‡ï¼Œä¸èƒ½é‡å¤å£°æ˜ã€‚å­˜åœ¨å—çº§ä½œç”¨åŸŸã€‚å­˜åœ¨æš‚æ—¶æ€§æ­»åŒº

**const**

å£°æ˜æ—¶åº”è¯¥åˆå§‹åŒ–ï¼Œå¦åˆ™æŠ¥é”™ã€‚

å£°æ˜å¸¸é‡ä¸å¯é‡æ–°èµ‹å€¼

## ç®­å¤´å‡½æ•°

ES6å…è®¸ä½¿ç”¨ç®­å¤´ï¼ˆ=>ï¼‰å®šä¹‰å‡½æ•°

```()=>{}```ç­‰äºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¦‚æœä¸éœ€è¦ä¼ å‚ï¼Œæˆ–éœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥ç”¨è¿™ç§å½¢å¼

```javascript
(a,b)=>{return a+b}
```

å¦‚æœå‡½æ•°åªéœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥å°†æ‹¬å·æ›¿æ¢ä¸ºæ‰€éœ€è¦ä¼ é€’çš„å‚æ•°

```
a=>{console.log(a)}
```

å› ä¸ºç®­å¤´å‡½æ•°é»˜è®¤ä¸ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦è°ƒç”¨å¯ä»¥å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡

```javascript
const a  = b=>{console.log(b)};a('1')
```

ç®­å¤´å‡½æ•°å¯ä»¥ç®€åŒ–è¿”å›å€¼çš„æ“ä½œï¼Œä¾‹å¦‚

```const a = b=>b*b;```ç­‰åŒäº```function a(b){return b*b};```

ä¸”ç®­å¤´å‡½æ•°ä¸å¯ä»¥ç”¨äºæ„é€ å‡½æ•°ï¼Œå³ä¸å¯ä»¥ä½¿ç”¨newå…³é”®å­—ï¼Œå¦åˆ™æŠ¥é”™

å¦å¦‚æœéœ€è¦è¿”å›å¯¹è±¡ï¼Œéœ€è¦ä»¥è¿™ç§å½¢å¼```const a = ()=>({a:1,b:2})```,å› ä¸ºèŠ±æ‹¬å·è¢«è®¤ä¸ºå‡½æ•°ä½“çš„å¼€å§‹ï¼Œä¸åŠ æ‹¬å·ä¸ä¼šè¿”å›æƒ³è¦çš„ç»“æœ

thisä¼šè¢«ç»‘å®šä¸ºå‡½æ•°æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œç»†èŠ‚çœ‹ä¹¦

## æ¨¡æ¿å­—ç¬¦ä¸²

æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯å­—ç¬¦ä¸²çš„å¢å¼ºç‰ˆï¼Œå­—ç¬¦ä¸²plusï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†ã€‚å¯ä»¥å½“åšæ™®é€šå­—ç¬¦ä¸²ç”¨ï¼ŒåŒæ—¶æ¢è¡Œç©ºæ ¼è¢«æ”¯æŒã€‚

æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥ä½¿ç”¨å˜é‡ï¼Œ**${}**ã€‚ä¾‹å¦‚ï¼š

```javascript
let a = like;
const string = `i ${a} you` //i like you
```

åŒæ—¶ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²èŠ±æ‹¬å·ä¸­ä¸åªå¯ä»¥ä½¿ç”¨å˜é‡ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨ä»»æ„çš„javascriptè¡¨è¾¾å¼ï¼ŒåŒ…æ‹¬è°ƒç”¨å‡½æ•°ï¼Œåªè¦è¡¨è¾¾å¼å¯ä»¥è¿”å›ä¸€ä¸ªæ­£ç¡®çš„å€¼ï¼Œä¸”è¡¨è¾¾å¼æœ¬èº«æ— é”™è¯¯ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²éƒ½ä¼šæ­£å¸¸æ‰§è¡Œ



```javascript
const a = ()=>{//do something};
let string = `${a()}` //do something
let strings = `${3>2?yes:false}` //yes
```

## **å˜é‡çš„è§£æ„èµ‹å€¼**

ES6ä¸­æŒ‰ç…§ä¸€å®šæ¨¡å¼ä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œç„¶åå¯¹å˜é‡è¿›è¡Œèµ‹å€¼çš„æ“ä½œå«åšè§£æ„èµ‹å€¼

è§£æ„èµ‹å€¼å¯ä»¥ç”¨äºæ•°ç»„ï¼Œå¯¹è±¡ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œå‡½æ•°å‚æ•°

### æ•°ç»„

æ•°ç»„çš„è§£æ„èµ‹å€¼å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆç›¸åº”çš„å€¼

```javascript
let [a,b,c] = [1,2,3];
let [foo,[[boo],coo]] = [1,[[2],3]];
let [x,,y] = [1,2,3] //x = 1 y =3
```

å¦‚æœè§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼å°±ç­‰äº**undefined**

```javascript
let [foo] = [];   //undefined
let [bar ,foo ] = [1]; //  undefined
```

ä¸ºäº†é¿å…ä¸Šé¢è¿™ç§æƒ…å†µå¯ä»¥ä¸ºå˜é‡æŒ‡å®šé»˜è®¤å€¼

```javascript
let [foo = true] = []; //foo = true
let [x,y = 'b'] = ['a'] //x = 'a' ,y = 'b'
```

å¦å¤–ï¼ŒES6å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦(===)åˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼ä¸ç”Ÿæ•ˆ

```javascript
let [x = 1] = [null]; //x = null
```

å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œå³åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šæ±‚å€¼

```javascript
let f = ()=>{console.log('a')};
let [x = f()] = [1] ; //x = 1
```

ä¸Šé¢çš„æ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œ

å¦å¤–ï¼Œé»˜è®¤å€¼å¯ä»¥è¢«æŒ‡å®šä¸ºè§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œå‰ææ˜¯è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜

```javascript
let [x = 1,y = x] = [];//x = 1; y = 1
let [x = 1,y = x] = [2]; // x = 2, y = 2
let [x = 1,y = x] = [1,2]; //x = 1,y = 2
let [x = y, y = 1] = [];//é”™è¯¯
```

æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºåœ¨xç”¨åˆ°yçš„æ—¶å€™ï¼Œyè¿˜æ²¡æœ‰è¢«å£°æ˜

å½“ç­‰å·å³è¾¹çš„å­å…ƒç´ å¤šäºå·¦è¾¹æ—¶ï¼Œå¯ä»¥è§£æ„æˆåŠŸã€‚ä½†å±äºä¸å®Œå…¨è§£æ„ï¼Œå¯ä»¥ç”¨restæ¥æ”¶å‰©ä½™çš„å…ƒç´ 

```javascript
let [x,y] = [1,2,3] // x= 1 y = 2 
```

å¦‚æœç­‰å·å³è¾¹æ˜¯ä¸å¯éå†è§£æ„ï¼Œæˆ–è½¬ä¸ºå¯¹è±¡åä¸å…·æœ‰**Iterator**æ¥å£ï¼Œä¼šå¯¼è‡´è§£æ„å¤±è´¥ï¼Œä¸”æŠ›å‡ºé”™è¯¯

### å¯¹è±¡

å¯¹è±¡çš„è§£æ„èµ‹å€¼ä¸æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±ä»–ä»¬çš„ä½ç½®å†³å®šã€‚è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼

```javascript
let {bar,foo} = {foo:"aaa",bar:"bbb"} //foo = "aaa",bar = "bbb"
let {vaz} = {foo:"aaa"} //vaz = undefined
```

å¦‚æœæƒ³è¦æŠŠå€¼èµ‹ç»™ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œè€Œä¸æ˜¯æ²¿ç”¨åŸæ¥çš„å±æ€§åï¼Œå¯ä»¥ç›´æ¥æŒ‡å®š

```javascript
let obj = {first:'hello',last:'world'};
let {first:f,last:l} = obj;
f //'hello'
l //'world'
```

å¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹å€¼ç»™å¯¹åº”çš„å˜é‡ï¼Œå‰è€…åªç”¨äºåŒ¹é…ï¼Œä¸ä¼šç”Ÿæˆå˜é‡ï¼Œåè€…ç”¨äºè¢«èµ‹å€¼ï¼Œä¼šç”Ÿæˆæ–°çš„å˜é‡ï¼›

```javascript
let {p:[x,{y}]} = {p:['hello',{y:'world'}]}; 
x //'hello'
y // 'world'
```

åŒæ•°ç»„çš„è§£æ„èµ‹å€¼ä¸€æ ·å¯¹è±¡çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œç”Ÿæ•ˆæ¡ä»¶æ˜¯å¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äºundefined

```javascript
var {x=3} = {};
x//3
var {x:y=3} = {};
y//3
```

### å­—ç¬¦ä¸²

å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚å› ä¸ºå­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡

```javascript
const [a,b,c,d,e] = 'hello';
a//'h'
b//'e'
c//'l'
d//'l'
e//'o'
```

ç±»æ•°ç»„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªlengthå±æ€§ï¼Œå› æ­¤å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œè§£æ„èµ‹å€¼

```javascript
let {length:len} = 'hello';
len // 5
```

### æ•°ç»„å’Œå¸ƒå°”å€¼

è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚undefinedå’Œnullæ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºé”™è¯¯

```javascript
let {toString:s} = 123;
s === Number.prototype.toString //true
let {toString:s} = true;
s === Boolean.prototype.toString //true
let {prop:x} = undefined //TypeError
let {prop:y} = null //TypeError
```

### å‡½æ•°

å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼

```javascript
let add = ([x,y])=>x+y;
add([1,2]); //3
add(1,2); //TypeError
```

ä¸Šé¢çš„ä¾‹å­ä¸­ä¼ å…¥çš„å‚æ•°ä¼šè¢«è§£æ„ä¸ºä¸¤ä¸ªå˜é‡

åŒæ ·çš„ï¼Œå‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼

```javascript
let move = ({x=0,y=0}={})=>[x,y]
move({x:3,y:8}); //[3,8]
move({x:3}); //[3,0]
move({}); //[0,0]
move(); //[0,0]
```

### è§£æ„èµ‹å€¼çš„ç”¨é€”

#### äº¤æ¢å˜é‡çš„å€¼

```javascript
let x = 1;
let y = 2;
[x,y] = [y,x];
```

#### ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼

```javascript
//è¿”å›ä¸€ä¸ªæ•°ç»„
let example = ()=>[1,2,3];
let [a,b,c] = example();
//è¿”å›ä¸€ä¸ªå¯¹è±¡
let example = ()=>{foo:1,bar:2};
let {foo,bar} = example();
```

#### å‡½æ•°å‚æ•°çš„å®šä¹‰

å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥

```javascript
//å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼
let f = ([x,y,z])=>{ //do something};
f([1,2,3]);
//å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼
let f = ({x,y,z})=>{ //do something};
f({z:3,y:2,x:1});
```

#### æå–JSONæ•°æ®

```javascript
let jsondata = {id:42,status:'ok',data:[867,1]};
let {id,status,data:number} = jsondata;
id // 42
status //'ok'
number //[867,1]
```

#### å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼

```javascript
let jQuery.ajax = (url,{
async=true,
beforeSend = function(){},
cache=true,
complete=function(){},
crossDomain=false,
global=true,})=>{ // do something}
```

#### éå†Mapç»“æ„

```javascript
let map = new Map();
map.set('first','hello');
map.set('second','world');
for(let [key, value] of map){console.log(key+"is"+value)};
//first is world
//second is world
```

å¦‚æœåªè¦è·å–é”®åï¼Œæˆ–è€…åªæƒ³è·å–é”®å€¼ï¼Œå¯ä»¥å‘ä¸‹é¢è¿™æ ·å†™

```javascript
//è·å–é”®å
for(let [key] of map){ // ... }
//è·å–é”®å€¼
for(let [,value] of map){ // ... }
```

è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•

åŠ è½½æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦æŒ‡å®šè¾“å…¥çš„æ–¹æ³•ã€‚è§£æ„èµ‹å€¼æ˜¯çš„è¾“å…¥è¯­å¥éå¸¸çš„æ¸…æ™°

```javascript
const {SourceMapConsumer, SourceNode} = require('source-map')
```





## spread

**...**æ‰©å±•è¿ç®—ç¬¦ç”¨äºå±•å¼€æ“ä½œ,è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°è°ƒç”¨

```javascript
console.log(...[1,2,3]) //1 2 3
console.log(1,...[2,3,4],5) //1 2 3 4 5

let push = (array,...items)=>{array.push(...items)};

let add = (x,y)=>x+y;
add(...[4,38]) //42

Math.max(...[14,3,77]);

let arr1=[0,1,2];
let arr2=[3,4,5];
arr1.push(...arr2);
```

æ‰©å±•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥æ”¾ç½®è¡¨è¾¾å¼ï¼Œå¦‚æœæ”¾ç½®ç©ºæ•°ç»„ï¼Œåˆ™ä¸äº§ç”Ÿä»»ä½•æ•ˆæœ

```javascript
const arr = [...(x>0?['a']:[]),'b'];
[...[],1] //[1]
```

### spreadè¿ç®—ç¬¦çš„åº”ç”¨

#### åˆå¹¶æ•°ç»„

```javascript
[1,2,...more]
let arr1= ['a','b'];
let arr2= ['c'];
let arr3= ['d','e'];
[...arr1,...arr2,...arr3]
```

#### ä¸è§£æ„èµ‹å€¼ç»“åˆ

```javascript
const [fi,...rest] = [1,2,3,4,5]
fi //1
rest // [2,3,4,5]

const [...btn,last] = [1,2,3,4,5] //æŠ¥é”™
const [first,...middle,last] = [1,2,3,4,5] //æŠ¥é”™
```

å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦åº”ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œé‚£ä¹ˆåªèƒ½å°†å…¶æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™æŠ¥é”™

#### å‡½æ•°çš„è¿”å›å€¼

å‡½æ•°å¦‚æœéœ€è¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½è¿”å›æ•°ç»„æˆ–å¯¹è±¡ã€‚æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ç®€åŒ–è¿™ä¸€æ“ä½œ

```javascript
var datef = readDAte(database);
var d = new Date(...datef);
```

#### å­—ç¬¦ä¸²

æ‰©å±•è¿ç®—ç¬¦è¿˜å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ã€‚

```javascript
[...'hello'];
// ["h","e","l","l","o"]
```

è€Œä¸”è¿™ç§å†™æ³•æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯ä»¥æ­£ç¡®è¯†åˆ«32ä½çš„Unicodeå­—ç¬¦ã€‚

```javascript
'x\uD83D\uDE80y'.length //4
[...'x\uD83D\uDE80y'].length //3
console.log('x\uD83D\uDE80y') //xğŸš€y
```

jsä¼šå°†32ä½Unicodeå­—ç¬¦è¯†åˆ«ä¸º2ä¸ªå­—ç¬¦ã€‚å› æ­¤ï¼Œå¦‚æœé‡åˆ°è¿™ç§æƒ…å†µï¼Œæœ€å¥½éƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦æ”¹å†™

## rest

ES6ä¸­å¼•å…¥äº†restå‚æ•°ï¼ˆå½¢å¼ä¸ºâ€œ...å˜é‡åâ€ï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œå¤šå‡ºæ¥çš„å‚æ•°ä¼šè¢«æ”¾å…¥ä¸€ä¸ªæ•°ç»„é‡Œ

```javascript
let add = (...values)=>{
	let sum = 0;
	for(let val of values){
    sum +=val;
	}
	return sum;
}
add(2,5,3) //10
```

ä¸Šé¢æ˜¯ä¸€ä¸ªç®€å•çš„æ±‚å’Œå‡½æ•°ï¼Œé€šè¿‡restå‚æ•°æ¥æ”¶å‰©ä½™å‚æ•°ï¼Œå°±å¯ä»¥å®ç°ä¼ å…¥ä»»æ„æ•°ç›®çš„å‚æ•°

åŒæ ·çš„ï¼Œrestå‚æ•°ä¹‹åä¸èƒ½å†æœ‰å…¶ä»–å‚æ•°ï¼Œå¦åˆ™æŠ¥é”™

```javascript
let push = (array,...items)=>{
    items.forEach((item)=>{
        array.push(item);
    });
}
var a = [];
push(a,1,2,3);
a //[1,2,3]
```

## class

ç±»æ–¹æ³•ç­‰åŒäºæ„é€ å‡½æ•°ï¼Œä½¿ç”¨æ—¶éœ€è¦é€šè¿‡newå…³é”®å­—ï¼Œç›´æ¥è°ƒç”¨ä¼šæŠ¥é”™ï¼Œè€Œä¸”ä¸éœ€è¦åŠ ä¸Šfunctionä¿ç•™å­—ï¼Œå®šä¹‰çš„åŸå‹æ–¹æ³•ä¹‹é—´ä¸éœ€è¦é€—å·åˆ†éš”

```javascript
class Point{
    constructor(){
        this.x = 1;
        this.y = 2;
    }        //æ„é€ å‡½æ•°éƒ¨åˆ†
    toString(){
        //do something
    }  //å®šä¹‰åœ¨åŸå‹ä¸Šçš„æ–¹æ³•
}
let b = new Point();
```

æ„é€ å‡½æ•°çš„prototypeå±æ€§åœ¨ES6çš„ç±»ä¸Šç»§ç»­å­˜åœ¨ï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½è¢«å®šä¹‰åœ¨prototypeå±æ€§ä¸Šï¼Œåœ¨ç±»çš„å®ä¾‹ä¸Šè°ƒç”¨æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯è°ƒç”¨åŸå‹ä¸Šçš„æ–¹æ³•

ç”±äºç±»çš„æ–¹æ³•(é™¤constructorå¤–)éƒ½æ˜¯å®šä¹‰åœ¨prototypeå¯¹è±¡ä¸Šï¼Œæ‰€ä»¥ç±»çš„æ–°æ–¹æ³•å¯ä»¥æ·»åŠ åœ¨prototypeå¯¹è±¡ä¸Šï¼Œæ·»åŠ å¤šä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨ **Object.assign**æ–¹æ³•

```javascript
let fn = ()=>{console.log('1')};
class Point{
    constructor(){
        //do something
    }
};


Object.assign(Point.prototype,{
    tostring(){
        //ssss
    },
    tovalue(){
        //ssss
    },
    fn
});

```

classç±»ä¸€å®šå«æœ‰ä¸€ä¸ªconstrucotrå±æ€§ï¼Œå¦‚æœåœ¨åˆ›å»ºclassç±»çš„æ—¶å€™ï¼Œæ²¡æœ‰å®šä¹‰constructorå±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¼šè¢«é»˜è®¤èµ‹äºˆä¸€ä¸ªç©ºçš„constructorå±æ€§

classä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„å½¢å¼å®šä¹‰ï¼Œæ­¤æ—¶å¯ä»¥çœç•¥classåé¢çš„å…³é”®å­—

```javascript
const myclass = class{
        constructor(){
        //do something
    }
}
```

[ç§æœ‰æ–¹æ³•ï¼Œç§æœ‰å±æ€§,thisæŒ‡å‘ç­‰](http://es6.ruanyifeng.com/?search=rest&x=0&y=0#docs/class#%E7%A7%81%E6%9C%89%E6%96%B9%E6%B3%95%E5%92%8C%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7)

classçš„é™æ€æ–¹æ³•

ç±»ç›¸å½“äºå®ä¾‹çš„åŸå‹ï¼Œæ‰€æœ‰åœ¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•éƒ½ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œå¦‚æœåœ¨ä¸€ä¸ªæ–¹æ³•å‰é¢åŠ ä¸Šstaticå…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®ä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯é€šè¿‡ç±»è°ƒç”¨ã€‚æ­¤æ—¶å¦‚æœåœ¨å®ä¾‹ä¸Šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±ä¼šæŠ›å‡ºé”™è¯¯

```javascript
class foo{
    static classmethod(){
        //do something
    }
}
foo.classmethod() //
```

çˆ¶ç±»çš„é™æ€æ–¹æ³•å¯ä»¥è¢«å­ç±»ç»§æ‰¿

```javascript
class foo{
    static classmethod(){
        //do something
    }
}
class bar extends foo{}

bar.classmethod()
```

## ç»§æ‰¿

classå¯ä»¥é€šè¿‡extendså…³é”®å­—å®ç°ç»§æ‰¿ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­

å­ç±»å¿…é¡»åœ¨constructoræ–¹æ³•ä¸­è°ƒç”¨superæ–¹æ³•ï¼Œå¦åˆ™åˆ›å»ºå®ä¾‹æ—¶ä»¥åŠä½¿ç”¨thiså…³é”®å­—ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶ç±»çš„thiså¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ã€‚å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡

````javascript
class point extends sd{
    constructor(x,y){
        this.x = 1; //æŠ¥é”™
        super(x,y)
        this.y = 2; //æ­£å¸¸
    }
}
Object.getPrototypeof(point) === sd //true
````

super()å°±æ˜¯è°ƒç”¨äº†ä¸€æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°

superå…³é”®å­—å¯ä»¥å½“åšå‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“åšå¯¹è±¡ä½¿ç”¨ï¼Œå½“å½“åšå‡½æ•°ä½¿ç”¨æ—¶ï¼Œåªå¯ä»¥ç”¨åœ¨ç±»çš„constructorä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹ä¼šæŠ›å‡ºé”™è¯¯ï¼Œä¸”å½“å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶å¿…é¡»è°ƒç”¨ä¸€æ¬¡super()æ–¹æ³•

```javascript
class A{}
class B extends A{
    constructor(){
        super();
    }
}
```

å½“superå½“ä½œå¯¹è±¡ä½¿ç”¨æ—¶ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚åŒæ—¶ï¼Œå› ä¸ºsuperæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–è€…å±æ€§æ˜¯æ— æ³•é€šè¿‡superè°ƒç”¨çš„

```javascript
class A{
    p(){
        //
    }
}
class B extends A{
    constructor(){
        super();
        console.log(super.p());
    }
}
//å±æ€§åŒç†
```

å½“ä¸”ä»…å½“å­ç±»è°ƒç”¨äº†super()æ–¹æ³•åï¼Œå­ç±»å¯ä»¥å®šä¹‰æ–°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é‡å†™çˆ¶ç±»ä¸­å·²æœ‰çš„å±æ€§æˆ–æ–¹æ³•

## Module

ES6çš„æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexportå’Œimportã€‚

###export

exportå‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimportå‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½

```javascript
export let a = 'a';
export let b = 'b';

let a = 'a';
let b = 'b';
export {a,b}
```



exportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»

```javascript
//æŠ¥é”™
export 1;
//æŠ¥é”™
var m = 1;
export m;
```

ä¸Šé¢ä¸¤ç§å†™æ³•éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰æä¾›å¯¹å¤–çš„æ¥å£ã€‚1åªæ˜¯ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯æ¥å£

```javascript
//å†™æ³•ä¸€
export var m = 1;
//å†™æ³•äºŒ
var m = 1;
export{m};
//å†™æ³•ä¸‰
var n = 1;
export{n as m} 
//ä»¥åˆ«åmè¾“å‡º
```

åŒæ ·çš„ï¼Œfunctionå’Œclassçš„è¾“å‡ºä¹Ÿå¿…é¡»é‡‡ç”¨è¿™æ ·çš„å†™æ³•

```javascript
//æŠ¥é”™
let f = ()=>{};
export f;
//å†™æ³•ä¸€
export let f = ()=>{}
//å†™æ³•äºŒ
let f = ()=>{}
export {f};
```

exportè¯­å¥è¾“å‡ºçš„æ¥å£ä¸å…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œå³é€šè¿‡è¯¥æ¥å£å¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼

```javascript
export var foo = 'bar'
setTimeout(()=>foo = 'baz',500);
```

exportå‘½ä»¤ä»¥åŠimportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»æ„ä½ç½®ï¼Œåªè¦ä¿è¯å…¶åœ¨æ¨¡å—é¡¶å±‚å°±å¯ä»¥ï¼Œå¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™

### import

```javascript
import {a,b,c} from './profile';//ä¸éœ€è¦åŠ åç¼€å
```

å¦‚æœæƒ³é‡å‘½åè¾“å…¥çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡aså…³é”®å­—

```javascript
import {lastname as name} from './profile';//å¯ä»¥ä¸ºç»å¯¹è·¯å¾„
```

importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨å¹¶é¦–å…ˆæ‰§è¡Œï¼Œå› æ­¤ï¼Œä¸‹é¢çš„å†™æ³•æ˜¯ä¸ä¼šæŠ¥é”™çš„

```javascript
foo();
import {foo} from './bundle';
```

ç”±äºES6çš„æ¨¡å—å€¡å¯¼çš„æ˜¯é™æ€ä¼˜åŒ–ï¼Œæ‰€ä»¥importæ˜¯é™æ€æ‰§è¡Œçš„ï¼Œå› æ­¤ä¸èƒ½åœ¨å…¶ä¸­ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œä»¥åŠåªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„

ç›®å‰ï¼Œé€šè¿‡Babelè½¬ç ï¼Œcommonjsçš„å‘½ä»¤å’ŒES6çš„æ¨¡å—åŒ–å‘½ä»¤ï¼Œå¯ä»¥å†™åœ¨ä¸€ä¸ªæ¨¡å—é‡Œï¼Œä½†è¿™å¹¶ä¸è¢«æ”¯æŒã€‚å› ä¸ºimportä¼šåœ¨é™æ€è§£æé˜¶æ®µæ‰§è¡Œï¼Œä¼šä¼˜å…ˆäºcommonjsçš„æ¨¡å—åŒ–å‘½ä»¤ï¼Œå¯èƒ½ä¼šå¾—ä¸åˆ°æƒ³è¦çš„ç»“æœ

### æ¨¡å—æ•´ä½“åŠ è½½

å¯ä»¥ä½¿ç”¨(*)æ¥æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Š

```javascript
//cilcle.js
let a = ()=>{}
//bundle.js
import * as circle form './circle';
circle.a();
```

åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¨¡å—æ•´ä½“åŠ è½½æ‰€åœ¨çš„å¯¹è±¡åº”è¯¥æ˜¯å¯ä»¥é™æ€åˆ†æçš„ï¼Œæ‰€ä»¥ä¸å…è®¸è¿è¡Œæ—¶æ”¹å˜

````javascript
import * as circle from './circle';

circle.foo = 'a';//æŠ¥é”™
circle.area = ()=>{};//æŠ¥é”™
````

### export default

export defaultè§„å®šäº†é»˜è®¤è¾“å‡ºï¼Œé»˜è®¤è¾“å‡ºæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªã€‚

export defaultè¾“å‡ºçš„å‡½æ•°é»˜è®¤ä¸ºåŒ¿åå‡½æ•°ï¼Œéœ€è¦ä½¿ç”¨æ—¶é‡æ–°å‘½åï¼Œæ‰€ä»¥å³ä½¿é»˜è®¤è¾“å‡ºäº†ä¸€ä¸ªæœ‰åå­—çš„å‡½æ•°ï¼Œè¿™ä¸ªåå­—ä¹Ÿä»…é™äºåœ¨æœ¬æ¨¡å—ç”Ÿæ•ˆã€‚

export defaultå‘½ä»¤çš„æœ¬è´¨æ˜¯å°†è¯¥å‘½ä»¤åé¢çš„å€¼èµ‹ç»™defaultå˜é‡åå†é»˜è®¤ï¼Œæ‰€ä»¥è¾“å‡ºå˜é‡æˆ–è€…å‡½æ•°æ—¶ä¸ç”¨åŠ èŠ±æ‹¬å·ï¼Œå› ä¸ºæ­¤æ—¶å·²ç»å­˜åœ¨æ¥å£ï¼Œé»˜è®¤ä¸ºdefault,importå¼•å…¥çš„æ—¶å€™ä¹Ÿä¸éœ€è¦åŠ èŠ±æ‹¬å·

```javascript
export default function foo(){
    //
}
//æˆ–è€…
let foo = ()=>{}
export default foo;
//æ­£ç¡®
export var a = 1;
//æ­£ç¡®
var a = 1;
export default a;
//é”™è¯¯
export default var a = 1;
//é»˜è®¤å°†açš„å€¼èµ‹ç»™defaultï¼Œæ‰€ä»¥ä¸Šé¢è¿™ç§å†™æ³•ä¼šæŠ¥é”™
```

åœ¨è½½å…¥æ¨¡å—çš„æ—¶å€™ï¼Œå¯ä»¥åŒæ—¶è¾“å…¥å…¶ä»–æ¥å£

```javascript
import as from 'file';
import as,{each,one} from 'file'

//export defaultä¹Ÿå¯ä»¥ç”¨æ¥è¾“å‡ºç±»

export default class{...}

import myclass from 'file';
let a = new myclass();
```

exportä¸importçš„å¤åˆå†™æ³•ï¼Œå¦‚æœéœ€è¦åœ¨ä¸€ä¸ªæ¨¡å—ä¸­è¾“å…¥åè¾“å‡ºåŒä¸€ä¸ªæ¨¡å—

```javascript
export {foo,bar} from 'my';
//ç­‰åŒäº
import {foo,bar} from 'my';
export {foo,bar};

//æ¥å£æ”¹å
export {foo as myfoo} from 'my';
//æ•´ä½“è¾“å‡º
export * from 'my';
//é»˜è®¤æ¥å£
export {default} from 'my';
//å…·åæ¥å£æ”¹ä¸ºé»˜è®¤æ¥å£
export {es6 as default} from 'my';
//ç­‰åŒäº
import {es6} from 'my';
export default es6;
//é»˜è®¤æ¥å£æ”¹ä¸ºå…·åæ¥å£
export {default as es6} from 'my'
```

ä¸Šé¢çš„æ•´ä½“è¾“å‡ºå¯ä»¥å®ç°æ¨¡å—çš„ç»§æ‰¿

```javascript
export * from 'circle';
export var e = 'a';
export default ()=>{}ï¼›


```

export *å‘½ä»¤ä¼šå¿½ç•¥circleæ¨¡å—çš„defaultæ–¹æ³•ã€‚

## æ•°ç»„çš„æ‰©å±•æ–¹æ³•

### Array.map()



**map()** æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚

```javascript
let new_array = arr.map(function callback(currentValue, index, array) { 
    // Return element for new_array 
}[, thisArg])
```

`callback`

- `currentValue`

  `callback` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ ã€‚

- `index`

  `callback` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚

- `array`

  `callback` çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œ`map` æ–¹æ³•è¢«è°ƒç”¨çš„æ•°ç»„ã€‚

`thisArg`å¯é€‰çš„ã€‚æ‰§è¡Œ `callback` å‡½æ•°æ—¶ ä½¿ç”¨çš„`this` å€¼ã€‚ 

`map` æ–¹æ³•ä¼šç»™åŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æŒ‰é¡ºåºè°ƒç”¨ä¸€æ¬¡  `callback` å‡½æ•°ã€‚`callback` æ¯æ¬¡æ‰§è¡Œåçš„è¿”å›å€¼ç»„åˆèµ·æ¥å½¢æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚ `callback` å‡½æ•°åªä¼šåœ¨æœ‰å€¼çš„ç´¢å¼•ä¸Šè¢«è°ƒç”¨ï¼›é‚£äº›ä»æ¥æ²¡è¢«èµ‹è¿‡å€¼æˆ–è€…ä½¿ç”¨ `delete` åˆ é™¤çš„ç´¢å¼•åˆ™ä¸ä¼šè¢«è°ƒç”¨ã€‚

`callback` å‡½æ•°ä¼šè¢«è‡ªåŠ¨ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šæ•°ç»„å…ƒç´ ï¼Œå…ƒç´ ç´¢å¼•ï¼ŒåŸæ•°ç»„æœ¬èº«ã€‚

å¦‚æœ `thisArg` å‚æ•°æœ‰å€¼ï¼Œåˆ™æ¯æ¬¡ `callback` å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œ`this` éƒ½ä¼šæŒ‡å‘ `thisArg`å‚æ•°ä¸Šçš„è¿™ä¸ªå¯¹è±¡ã€‚å¦‚æœçœç•¥äº† `thisArg ``å‚æ•°,``æˆ–è€…èµ‹å€¼ä¸º null` æˆ– `undefined`ï¼Œåˆ™ this æŒ‡å‘å…¨å±€å¯¹è±¡ ã€‚

`map `ä¸ä¿®æ”¹è°ƒç”¨å®ƒçš„åŸæ•°ç»„æœ¬èº«ï¼ˆå½“ç„¶å¯ä»¥åœ¨ `callback` æ‰§è¡Œæ—¶æ”¹å˜åŸæ•°ç»„ï¼‰ã€‚

ä½¿ç”¨ map æ–¹æ³•å¤„ç†æ•°ç»„æ—¶ï¼Œæ•°ç»„å…ƒç´ çš„èŒƒå›´æ˜¯åœ¨ callback æ–¹æ³•ç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹å‰å°±å·²ç»ç¡®å®šäº†ã€‚åœ¨ map æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼šåŸæ•°ç»„ä¸­æ–°å¢åŠ çš„å…ƒç´ å°†ä¸ä¼šè¢« callback è®¿é—®åˆ°ï¼›è‹¥å·²ç»å­˜åœ¨çš„å…ƒç´ è¢«æ”¹å˜æˆ–åˆ é™¤äº†ï¼Œåˆ™å®ƒä»¬çš„ä¼ é€’åˆ° callback çš„å€¼æ˜¯ map æ–¹æ³•éå†åˆ°å®ƒä»¬çš„é‚£ä¸€æ—¶åˆ»çš„å€¼ï¼›è€Œè¢«åˆ é™¤çš„å…ƒç´ å°†ä¸ä¼šè¢«è®¿é—®åˆ°ã€‚

 

### Array.filter()

**filter()**Â æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚Â 

```javascript
var words = ['spray', 'limit', 'elite', 'exuberant', 'destruction', 'present'];

const result = words.filter(word => word.length > 6);

console.log(result);
// expected output: Array ["exuberant", "destruction", "present"]
```

```javascript
var new_array = arr.filter(callback(element[, index[, array]])[, thisArg])
```

`callback`

	ç”¨æ¥æµ‹è¯•æ•°ç»„çš„æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚è°ƒç”¨æ—¶ä½¿ç”¨å‚æ•° (element, index, array)ã€‚
	è¿”å›trueè¡¨ç¤ºä¿ç•™è¯¥å…ƒç´ ï¼ˆé€šè¿‡æµ‹è¯•ï¼‰ï¼Œfalseåˆ™ä¸ä¿ç•™ã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š

- **element**

  å½“å‰åœ¨æ•°ç»„ä¸­å¤„ç†çš„å…ƒç´ 

- **indexï¼ˆå¯é€‰ï¼‰**

  æ­£åœ¨å¤„ç†å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•

- **arrayï¼ˆå¯é€‰ï¼‰**

  è°ƒç”¨äº†filterç­›é€‰å™¨çš„æ•°ç»„

`thisArgï¼ˆå¯é€‰ï¼‰`

	å¯é€‰ã€‚æ‰§è¡Œ `callback` æ—¶çš„ç”¨äº `this` çš„å€¼ã€‚

è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é€šè¿‡æµ‹è¯•çš„å…ƒç´ çš„é›†åˆçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡æµ‹è¯•åˆ™è¿”å›ç©ºæ•°ç»„

`filter` ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€æ¬¡ `callback` å‡½æ•°ï¼Œå¹¶åˆ©ç”¨æ‰€æœ‰ä½¿å¾— `callback` è¿”å› true æˆ– [ç­‰ä»·äº true çš„å€¼](https://developer.mozilla.org/en-US/docs/Glossary/Truthy) çš„å…ƒç´ åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚`callback` åªä¼šåœ¨å·²ç»èµ‹å€¼çš„ç´¢å¼•ä¸Šè¢«è°ƒç”¨ï¼Œå¯¹äºé‚£äº›å·²ç»è¢«åˆ é™¤æˆ–è€…ä»æœªè¢«èµ‹å€¼çš„ç´¢å¼•ä¸ä¼šè¢«è°ƒç”¨ã€‚é‚£äº›æ²¡æœ‰é€šè¿‡ `callback` æµ‹è¯•çš„å…ƒç´ ä¼šè¢«è·³è¿‡ï¼Œä¸ä¼šè¢«åŒ…å«åœ¨æ–°æ•°ç»„ä¸­ã€‚

`callback` è¢«è°ƒç”¨æ—¶ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼š

1. å…ƒç´ çš„å€¼
2. å…ƒç´ çš„ç´¢å¼•
3. è¢«éå†çš„æ•°ç»„

å¦‚æœä¸º `filter` æä¾›ä¸€ä¸ª `thisArg` å‚æ•°ï¼Œåˆ™å®ƒä¼šè¢«ä½œä¸º `callback` è¢«è°ƒç”¨æ—¶çš„ `this` å€¼ã€‚å¦åˆ™ï¼Œ`callback` çš„ `this` å€¼åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹å°†æ˜¯å…¨å±€å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¸º `undefined`ã€‚
The `this`value ultimately observable by `callback` is determined according to [the usual rules for determining the`this` seen by a function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this).

ï¼ˆ å›è°ƒå‡½æ•°æœ€ç»ˆè§‚å¯Ÿåˆ° "this" çš„å€¼æ˜¯æ ¹æ®[é€šå¸¸å‡½æ•°æ‰€çœ‹åˆ°çš„ "this"çš„è§„åˆ™](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this)ç¡®å®šçš„ã€‚ï¼‰

`filter` ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œå®ƒè¿”å›è¿‡æ»¤åçš„æ–°æ•°ç»„ã€‚

`filter` éå†çš„å…ƒç´ èŒƒå›´åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ `callback` ä¹‹å‰å°±å·²ç»ç¡®å®šäº†ã€‚åœ¨è°ƒç”¨ `filter` ä¹‹åè¢«æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¼šè¢« `filter` éå†åˆ°ã€‚å¦‚æœå·²ç»å­˜åœ¨çš„å…ƒç´ è¢«æ”¹å˜äº†ï¼Œåˆ™ä»–ä»¬ä¼ å…¥ `callback` çš„å€¼æ˜¯ `filter` éå†åˆ°å®ƒä»¬é‚£ä¸€åˆ»çš„å€¼ã€‚è¢«åˆ é™¤æˆ–ä»æ¥æœªè¢«èµ‹å€¼çš„å…ƒç´ ä¸ä¼šè¢«éå†åˆ°ã€‚

### Array.some()

**some()**æ–¹æ³•æµ‹è¯•æ•°ç»„ä¸­çš„æŸäº›å…ƒç´ æ˜¯å¦é€šè¿‡ç”±æä¾›çš„å‡½æ•°å®ç°çš„æµ‹è¯•ã€‚

```javascript
var array = [1, 2, 3, 4, 5];

var even = function(element) {

  // checks whether an element is even

  return element % 2 === 0;

};

console.log(array.some(even));

// expected output: true

```

```javascript
arr.some(callback[, thisArg])
```

å¦‚æœå›è°ƒå‡½æ•°è¿”å›ä»»ä½•æ•°ç»„å…ƒç´ çš„[truthy](https://developer.mozilla.org/en-US/docs/Glossary/truthy)å€¼ï¼Œåˆ™è¿”å›**true**ï¼›å¦åˆ™ä¸º**false**ã€‚

`callback`

- `currentValue`

  æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚

- `index` å¯é€‰

  æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•å€¼ã€‚

- `array`å¯é€‰

  `some()`è¢«è°ƒç”¨çš„æ•°ç»„ã€‚

`thisArg`å¯é€‰æ‰§è¡Œ `callback` æ—¶ä½¿ç”¨çš„ `this` å€¼ã€‚

`some` ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡ `callback` å‡½æ•°ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªä½¿å¾— callback è¿”å›ä¸€ä¸ªâ€œçœŸå€¼â€ï¼ˆå³å¯è½¬æ¢ä¸ºå¸ƒå°”å€¼ true çš„å€¼ï¼‰ã€‚å¦‚æœæ‰¾åˆ°äº†è¿™æ ·ä¸€ä¸ªå€¼ï¼Œ`some` å°†ä¼šç«‹å³è¿”å› `true`ã€‚å¦åˆ™ï¼Œ`some` è¿”å› `false`ã€‚`callback` åªä¼šåœ¨é‚£äº›â€æœ‰å€¼â€œçš„ç´¢å¼•ä¸Šè¢«è°ƒç”¨ï¼Œä¸ä¼šåœ¨é‚£äº›è¢«åˆ é™¤æˆ–ä»æ¥æœªè¢«èµ‹å€¼çš„ç´¢å¼•ä¸Šè°ƒç”¨ã€‚

`callback` è¢«è°ƒç”¨æ—¶ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šå…ƒç´ çš„å€¼ï¼Œå…ƒç´ çš„ç´¢å¼•ï¼Œè¢«éå†çš„æ•°ç»„ã€‚

å¦‚æœä¸º `some` æä¾›äº†ä¸€ä¸ª `thisArg` å‚æ•°ï¼Œå°†ä¼šæŠŠå®ƒä¼ ç»™è¢«è°ƒç”¨çš„ `callback`ï¼Œä½œä¸º `this` å€¼ã€‚å¦åˆ™ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹å°†ä¼šæ˜¯å…¨å±€å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ `undefined`ã€‚

`some` è¢«è°ƒç”¨æ—¶ä¸ä¼šæ”¹å˜æ•°ç»„ã€‚

`some` éå†çš„å…ƒç´ çš„èŒƒå›´åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ `callback`. æ—¶å°±å·²ç»ç¡®å®šäº†ã€‚åœ¨è°ƒç”¨ `some` åè¢«æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å€¼ä¸ä¼šè¢« `callback` è®¿é—®åˆ°ã€‚å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ä¸”è¿˜æœªè¢«è®¿é—®åˆ°çš„å…ƒç´ è¢« `callback`æ”¹å˜äº†ï¼Œåˆ™å…¶ä¼ é€’ç»™ `callback` çš„å€¼æ˜¯ `some` è®¿é—®åˆ°å®ƒé‚£ä¸€åˆ»çš„å€¼ã€‚

### Array.every()

**every()**Â æ–¹æ³•æµ‹è¯•æ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½é€šè¿‡äº†æŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚

ä¸someç›¸å¯¹ï¼Œæ¥æ”¶çš„å‚æ•°éƒ½æ˜¯ç›¸åŒçš„ã€‚

æ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½è¿”å›trueï¼Œæ‰è¿”å›trueã€‚å¦åˆ™è¿”å›false

### Array.reduce()

**reduce()**Â æ–¹æ³•å¯¹ç´¯åŠ å™¨å’Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆä»å·¦åˆ°å³ï¼‰åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°†å…¶å‡å°‘ä¸ºå•ä¸ªå€¼ã€‚



```javascript
const array1 = [1, 2, 3, 4];
const reducer = (accumulator, currentValue) => accumulator + currentValue;

// 1 + 2 + 3 + 4
console.log(array1.reduce(reducer));
// expected output: 10

// 5 + 1 + 2 + 3 + 4
console.log(array1.reduce(reducer, 5));
// expected output: 15
```

```javascript
arr.reduce(callback[, initialValue])
```

`callback`

æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å‡½æ•°ï¼ŒåŒ…å«å››ä¸ªå‚æ•°ï¼š


`accumulator`

- `currentValue`

  æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚

- `currentIndex`å¯é€‰

  æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚ å¦‚æœæä¾›äº†`initialValue`ï¼Œåˆ™ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ä¸ºç´¢å¼•ä¸º1ã€‚

- `array`å¯é€‰

  è°ƒç”¨`reduce`çš„æ•°ç»„

`initialValue`å¯é€‰

ç”¨ä½œç¬¬ä¸€ä¸ªè°ƒç”¨ `callback`çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ åœ¨æ²¡æœ‰åˆå§‹å€¼çš„ç©ºæ•°ç»„ä¸Šè°ƒç”¨ reduce å°†æŠ¥é”™ã€‚

å¦‚æœä¸ä¼ å…¥åˆå§‹å€¼ï¼Œä¸”æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆcallbackå°†ä¸ä¼šè¢«æ‰§è¡Œ

`reduce`ä¸ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¾æ¬¡æ‰§è¡Œ`callback`å‡½æ•°ï¼Œä¸åŒ…æ‹¬æ•°ç»„ä¸­è¢«åˆ é™¤æˆ–ä»æœªè¢«èµ‹å€¼çš„å…ƒç´ ï¼Œæ¥å—å››ä¸ªå‚æ•°ï¼š

- `accumulator `
- `currentValue `
- `currentIndex `
- `array`

å›è°ƒå‡½æ•°ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œ`accumulator` å’Œ`currentValue`çš„å–å€¼æœ‰ä¸¤ç§æƒ…å†µï¼šè°ƒç”¨`reduce`æ—¶æä¾›`initialValue`ï¼Œ`accumulator`å–å€¼ä¸º`initialValue`ï¼Œ`currentValue`å–æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼›æ²¡æœ‰æä¾› `initialValue`ï¼Œ`accumulator`å–æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œ`currentValue`å–æ•°ç»„ä¸­çš„ç¬¬äºŒä¸ªå€¼ã€‚

æ¯ä¸€æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸Šä¸€æ¬¡å›è°ƒå‡½æ•°æ‰€returnå‡ºæ¥çš„å€¼ï¼Œå¦‚æœå‡½æ•°ä¸è¿”å›ä»»ä½•å€¼ï¼Œé‚£ä¹ˆå°†ä¸ºundefinedã€‚å¦‚æœä¼ å…¥åˆå§‹å€¼ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå‚æ•°å°†ä¸ºåˆå§‹å€¼ï¼Œå¦åˆ™ä¸ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼

## Set

ES6æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ï¼ŒSetç±»ä¼¼äºæ•°ç»„ï¼Œä½†å…¶æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤ã€‚

Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°

```javascript
const s = new Set();
[2,3,4,5,2].forEach(x=>s.add(x));
for(let i of s){
    console.log(i)
}
// 2 3 4 5
```

Setå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°ç»„(æˆ–è€…å…·æœ‰iterableæ¥å£çš„å…¶ä»–æ•°æ®ç»“æ„)ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚

````javascript
const set = new Set([1,2,3,4,5]);
[...set]
//[1,2,3,4,5]
//å»é™¤æ•°ç»„çš„é‡å¤æˆå‘˜
[...new Set(array)]
````

Setçš„å®ä¾‹å…·æœ‰ä»¥ä¸‹å±æ€§ã€‚

```javascript
Set.prototype.size //è¿”å›Setå®ä¾‹çš„æˆå‘˜æ€»æ•°
const s = new Set();
s.size //0
```

Setçš„å®ä¾‹å…·æœ‰ä»¥ä¸‹æ–¹æ³•

```javascript
add(value) //æ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å›Setç»“æ„æœ¬èº«
delete(value) //åˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸ
has(value) //è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°æ˜¯å¦ä¸ºSetçš„æˆå‘˜
clear() //æ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ— è¿”å›å€¼
```

```javascript
s.add(1).add(2).add(2)

s.size //2

s.has(1) //true
s.has(3) //false

s.delete(2);
s.has(2) //false
```

